# Archivo de variables de entorno para AppGestion
# Generado automáticamente por Ansible - No editar manualmente

# Información del entorno
ENVIRONMENT={{ app_environment }}
PROJECT_NAME={{ project_name }}
AWS_REGION={{ aws_region }}

# Información de API Gateway
API_GATEWAY_URL={{ api_gateway_url | default('') }}

# Configuración Frontend
FRONTEND_URL={{ cloudfront_url | default('') }}

# Configuración CORS
CORS_ALLOWED_ORIGINS={{ cloudfront_url | default('*') }}
# Origen de respaldo para el primer despliegue y entornos de desarrollo
CORS_FALLBACK_ORIGIN=*

# Configuración de reintentos y resiliencia
DB_MAX_RETRIES=30
DB_RETRY_INTERVAL=5
SERVICE_TIMEOUT=60

# Valores para reintentos según entorno
{% if app_environment == 'production' %}
HEALTH_CHECK_INTERVAL=30
RETRY_BACKOFF_FACTOR=2
{% else %}
HEALTH_CHECK_INTERVAL=15
RETRY_BACKOFF_FACTOR=1
{% endif %}

# Credenciales de base de datos (obtenidas de AWS Secrets Manager)
# Servicio de usuarios
USER_DB_HOST={{ db_creds.host_user }}
USER_DB_PORT={{ db_creds.port }}
USER_DB_NAME={{ db_creds.db_name_user }}
USER_DB_USER={{ db_creds.username }}
USER_DB_PASSWORD={{ db_creds.password }}

# Servicio de productos
PRODUCT_DB_HOST={{ db_creds.host_product }}
PRODUCT_DB_PORT={{ db_creds.port }}
PRODUCT_DB_NAME={{ db_creds.db_name_product }}
PRODUCT_DB_USER={{ db_creds.username }}
PRODUCT_DB_PASSWORD={{ db_creds.password }}

# Información adicional
DEPLOYMENT_DATE={{ ansible_date_time.iso8601 }}
DEPLOYMENT_VERSION={{ project_version | default('1.0.0') }}

# Configuración de aplicación
LOG_LEVEL={{ 'DEBUG' if app_environment == 'development' else 'INFO' }}
ENABLE_PROFILING={{ 'true' if app_environment == 'development' else 'false' }}

# Variables para primer despliegue
FIRST_DEPLOYMENT={{ first_deployment | default('false') }}